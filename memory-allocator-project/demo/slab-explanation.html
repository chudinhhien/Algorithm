<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slab Memory Allocator - Gi·∫£i Th√≠ch Chi Ti·∫øt</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f2f5;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        h1 { color: #9c27b0; text-align: center; }
        h2 { color: #9c27b0; border-bottom: 2px solid #9c27b0; padding-bottom: 10px; }
        .highlight { background: #f3e5f5; padding: 15px; border-radius: 8px; margin: 15px 0; }
        .code { background: #2d3748; color: white; padding: 15px; border-radius: 8px; font-family: monospace; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üóÑÔ∏è Slab Memory Allocator - Gi·∫£i Th√≠ch Chi Ti·∫øt</h1>
        
        <h2>1. Kh√°i Ni·ªám C∆° B·∫£n</h2>
        <div class="highlight">
            <h3>üß± Slab l√† g√¨?</h3>
            <p><strong>Slab</strong> l√† m·ªôt kh·ªëi memory li√™n t·ª•c (th∆∞·ªùng 4KB) ƒë∆∞·ª£c chia th√†nh nhi·ªÅu <strong>objects</strong> c√πng k√≠ch th∆∞·ªõc.</p>
            <p><strong>V√≠ d·ª•:</strong> Slab 4KB = 256 objects √ó 16 bytes m·ªói object</p>
        </div>
        
        <div class="highlight">
            <h3>üì¶ Cache l√† g√¨?</h3>
            <p><strong>Cache</strong> l√† t·∫≠p h·ª£p c√°c slabs ch·ª©a objects c√πng k√≠ch th∆∞·ªõc. M·ªói cache qu·∫£n l√Ω m·ªôt size ri√™ng.</p>
            <p><strong>V√≠ d·ª•:</strong> Cache 64B bao g·ªìm nhi·ªÅu slabs, m·ªói slab ch·ª©a objects 64 bytes</p>
        </div>

        <h2>2. C·∫•u Tr√∫c trong Demo</h2>
        <p>Demo s·ª≠ d·ª•ng 5 cache sizes ti√™u chu·∫©n:</p>
        <ul>
            <li><strong>16B Cache:</strong> 256 objects/slab - d√†nh cho allocations nh·ªè</li>
            <li><strong>32B Cache:</strong> 128 objects/slab - d√†nh cho allocations nh·ªè-v·ª´a</li>
            <li><strong>64B Cache:</strong> 64 objects/slab - d√†nh cho allocations v·ª´a</li>
            <li><strong>128B Cache:</strong> 32 objects/slab - d√†nh cho allocations l·ªõn</li>
            <li><strong>256B Cache:</strong> 16 objects/slab - d√†nh cho allocations r·∫•t l·ªõn</li>
        </ul>

        <h2>3. Quy Tr√¨nh Allocation</h2>
        <div class="highlight">
            <h3>B∆∞·ªõc 1: Nh·∫≠n Request</h3>
            <p>User y√™u c·∫ßu allocate X bytes (v√≠ d·ª•: 50 bytes)</p>
        </div>
        
        <div class="highlight">
            <h3>B∆∞·ªõc 2: Ch·ªçn Cache</h3>
            <p>T√¨m cache nh·ªè nh·∫•t c√≥ th·ªÉ ch·ª©a ƒë∆∞·ª£c request size</p>
            <p><strong>V√≠ d·ª•:</strong> 50 bytes ‚Üí ch·ªçn Cache 64B (cache nh·ªè nh·∫•t ‚â• 50)</p>
        </div>
        
        <div class="highlight">
            <h3>B∆∞·ªõc 3: L·∫•y Object</h3>
            <p>L·∫•y object ƒë·∫ßu ti√™n t·ª´ free list c·ªßa cache ƒë√£ ch·ªçn</p>
            <p>ƒê√°nh d·∫•u object l√† "allocated"</p>
        </div>
        
        <div class="highlight">
            <h3>B∆∞·ªõc 4: M·ªü R·ªông (n·∫øu c·∫ßn)</h3>
            <p>N·∫øu cache h·∫øt free objects, t·∫°o slab m·ªõi v√† chia th√†nh objects</p>
        </div>

        <h2>4. Code Implementation Concept</h2>
        <div class="code">
// T√¨m cache ph√π h·ª£p
function findBestFitCache(size) {
    return caches.find(cache => cache.objectSize >= size);
}

// Allocate object
function allocate(size) {
    const cache = findBestFitCache(size);
    
    // T·∫°o slab m·ªõi n·∫øu c·∫ßn
    if (cache.freeObjects === 0) {
        cache.allocatedSlabs++;
        cache.freeObjects += cache.objectsPerSlab;
    }
    
    // L·∫•y object
    cache.freeObjects--;
    cache.allocatedObjects++;
    
    return { size: size, actualSize: cache.objectSize };
}
        </div>

        <h2>5. Performance Metrics</h2>
        <div class="highlight">
            <h3>üìà Cache Efficiency</h3>
            <p><strong>C√¥ng th·ª©c:</strong> (Actual Used / Total Allocated) √ó 100%</p>
            <p><strong>√ù nghƒ©a:</strong> T·ª∑ l·ªá memory ƒë∆∞·ª£c s·ª≠ d·ª•ng hi·ªáu qu·∫£</p>
            <p><strong>V√≠ d·ª•:</strong> Request 50B trong cache 64B ‚Üí efficiency = 50/64 = 78%</p>
        </div>
        
        <div class="highlight">
            <h3>‚öñÔ∏è Memory Overhead</h3>
            <p><strong>C√¥ng th·ª©c:</strong> (Slab Headers / Total Memory) √ó 100%</p>
            <p><strong>√ù nghƒ©a:</strong> T·ª∑ l·ªá memory d√†nh cho qu·∫£n l√Ω</p>
            <p><strong>V√≠ d·ª•:</strong> 10 slabs √ó 64B header / (10 √ó 4096B) = 1.56%</p>
        </div>

        <h2>6. ∆Øu ƒêi·ªÉm</h2>
        <ul>
            <li>‚úÖ <strong>T·ªëc ƒë·ªô cao:</strong> Allocation/deallocation O(1) - kh√¥ng c·∫ßn t√¨m ki·∫øm</li>
            <li>‚úÖ <strong>Gi·∫£m fragmentation:</strong> Objects c√πng size ƒë∆∞·ª£c nh√≥m l·∫°i</li>
            <li>‚úÖ <strong>Cache locality:</strong> Objects g·∫ßn nhau trong memory ‚Üí tƒÉng hi·ªáu su·∫•t CPU cache</li>
            <li>‚úÖ <strong>Object reuse:</strong> Objects ƒë∆∞·ª£c t√°i s·ª≠ d·ª•ng, kh√¥ng c·∫ßn kh·ªüi t·∫°o l·∫°i</li>
        </ul>

        <h2>7. Nh∆∞·ª£c ƒêi·ªÉm</h2>
        <ul>
            <li>‚ùå <strong>Internal fragmentation:</strong> L√£ng ph√≠ space khi request size < cache size</li>
            <li>‚ùå <strong>Memory overhead:</strong> C·∫ßn memory cho slab headers v√† management structures</li>
            <li>‚ùå <strong>Complexity:</strong> Implementation ph·ª©c t·∫°p h∆°n simple allocators</li>
            <li>‚ùå <strong>Fixed sizes:</strong> Kh√¥ng linh ho·∫°t v·ªõi sizes b·∫•t th∆∞·ªùng</li>
        </ul>

        <h2>8. So S√°nh v·ªõi Algorithms Kh√°c</h2>
        <table border="1" style="width: 100%; border-collapse: collapse; margin: 20px 0;">
            <tr style="background: #9c27b0; color: white;">
                <th style="padding: 10px;">Aspect</th>
                <th style="padding: 10px;">Slab</th>
                <th style="padding: 10px;">Buddy System</th>
                <th style="padding: 10px;">Memory Pool</th>
            </tr>
            <tr>
                <td style="padding: 8px;"><strong>Speed</strong></td>
                <td style="padding: 8px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê O(1)</td>
                <td style="padding: 8px;">‚≠ê‚≠ê‚≠ê‚≠ê O(log n)</td>
                <td style="padding: 8px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê O(1)</td>
            </tr>
            <tr style="background: #f8f9fa;">
                <td style="padding: 8px;"><strong>Fragmentation</strong></td>
                <td style="padding: 8px;">‚≠ê‚≠ê‚≠ê‚≠ê Low external</td>
                <td style="padding: 8px;">‚≠ê‚≠ê‚≠ê Medium</td>
                <td style="padding: 8px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Minimal</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><strong>Flexibility</strong></td>
                <td style="padding: 8px;">‚≠ê‚≠ê Fixed sizes only</td>
                <td style="padding: 8px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Any power of 2</td>
                <td style="padding: 8px;">‚≠ê‚≠ê Fixed sizes only</td>
            </tr>
        </table>

        <div style="text-align: center; margin: 30px 0; padding: 20px; background: #e8f5e8; border-radius: 10px;">
            <h2 style="color: #2e7d32;">üéØ S·∫µn s√†ng th·ª≠ nghi·ªám?</h2>
            <p style="font-size: 1.1rem;">B√¢y gi·ªù b·∫°n ƒë√£ hi·ªÉu c√°ch Slab Allocator ho·∫°t ƒë·ªông!</p>
            <a href="index.html" style="display: inline-block; background: #9c27b0; color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; font-weight: bold;">
                üöÄ M·ªü Demo Ch√≠nh
            </a>
            <p style="margin-top: 10px; color: #666;">Ch·ªçn "Slab Allocator" ƒë·ªÉ xem visualization ƒë√£ ƒë∆∞·ª£c c·∫£i thi·ªán</p>
        </div>
    </div>
</body>
</html> 
